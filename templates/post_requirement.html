{% extends 'base.html' %}

{# Set the page title for the browser tab #}
{% block title %}Post Requirement{% endblock %}

{% block content %}
<div class="form-container mx-auto p-4 bg-light border rounded shadow-sm"> {# Bootstrap classes for a card-like form container #}
    <h2 class="section-title text-center mb-4">Post a Requirement</h2> {# Centered heading, added bottom margin #}
    <form method="POST">
        {{ form.hidden_tag() }}
        
        <div class="mb-3">
            {{ form.title.label(class="form-label") }}
            {{ form.title(class="form-control", placeholder="e.g., Fix a leaky faucet") }}
            {% if form.title.errors %}
                {% for error in form.title.errors %}
                    <div class="text-danger form-text">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
        
        <div class="mb-3">
            {{ form.description.label(class="form-label") }}
            {{ form.description(class="form-control", rows=5, placeholder="Describe your requirement in detail") }}
            {% if form.description.errors %}
                {% for error in form.description.errors %}
                    <div class="text-danger form-text">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
        
        <div class="mb-3">
            {{ form.skill_needed.label(class="form-label") }}
            {{ form.skill_needed(class="form-control", placeholder="e.g., Plumbing, Electrician, Carpenter") }}
            {% if form.skill_needed.errors %}
                {% for error in form.skill_needed.errors %}
                    <div class="text-danger form-text">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
        
        <div class="mb-3">
            {{ form.location.label(class="form-label") }}
            {{ form.location(class="form-control", placeholder="e.g., Kakinada, Hyderabad") }}
            {% if form.location.errors %}
                {% for error in form.location.errors %}
                    <div class="text-danger form-text">{{ error }}</div>
                {% endfor %}
            {% endif %}
            <small class="form-text text-muted">
                Enter the location where the service is needed.
            </small>
        </div>

        <h3 class="mb-3 mt-4">Or Record Your Requirement:</h3> {# Added spacing and Bootstrap heading #}
        <div id="voice-recorder" class="p-3 mb-4 border rounded bg-light"> {# Styled voice recorder container #}
            <div class="d-flex align-items-center mb-3"> {# Flexbox for buttons and status #}
                <button type="button" id="startRecordingBtn" class="btn btn-info me-2">Start Recording</button>
                <button type="button" id="stopRecordingBtn" class="btn btn-warning" disabled>Stop Recording</button>
            </div>
            <audio id="playback" controls class="audio-player-full-width" style="display:none;"></audio> {# Using audio-player-full-width #}
            <p id="recordingStatus" class="mt-2 text-muted"></p> {# Added margin-top and muted text #}
            {{ form.voice_recording() }} {# Hidden field for JS to populate #}
        </div>

        <div class="d-grid mt-4"> {# Full-width submit button #}
            {{ form.submit(class="btn btn-primary btn-lg") }}
        </div>
    </form>

    {# Link the JavaScript file #}
    <script src="{{ url_for('static', filename='js/voice_recorder.js') }}"></script>
</div>
{% endblock %}